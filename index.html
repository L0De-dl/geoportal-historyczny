<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <title>Go≈Ça≈Ñcz wczoraj i dzi≈õ ‚Äì interaktywny przeglƒÖd zmian przestrzennych</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Leaflet CSS -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

  <!-- Wtyczka: wsp√≥≈Çrzƒôdne myszy -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-mouse-position@1.0.2/L.Control.MousePosition.css" />

  <!-- Wtyczka: miarka -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet-measure/dist/leaflet-measure.css" />

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }

    #map {
      width: 100vw;
      height: 100vh;
    }

    .map-title {
      background: white;
      padding: 8px 12px;
      margin: 10px;
      border-radius: 8px;
      font-size: 16px;
      font-weight: bold;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }
  </style>
</head>
<body>

  <div id="map"></div>

  <!-- Leaflet JS -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Wtyczka: wsp√≥≈Çrzƒôdne myszy -->
  <script src="https://unpkg.com/leaflet-mouse-position@1.0.2/L.Control.MousePosition.js"></script>

  <!-- Wtyczka: miarka -->
  <script src="https://unpkg.com/leaflet-measure/dist/leaflet-measure.js"></script>

<script>
  const map = L.map('map').setView([52.943501705388755, 17.30028687048696], 17);

  // OGRANICZENIE DO OBSZARU MAPY
  map.setMaxBounds([
    [52.9490239042419972, 17.2852683033793824], // NW
    [52.9381943661129881, 17.3122189892486809]  // SE
  ]);

  // Ustaw minimalny zoom tak, aby ca≈Çy obraz z 2002 by≈Ç zawsze widoczny
  map.setMinZoom(map.getBoundsZoom([
    [52.9490239042419972, 17.2852683033793824],
    [52.9381943661129881, 17.3122189892486809]
  ]));

  // Usu≈Ñ domy≈õlny zoom control
  map.zoomControl.remove();

  // Dodaj tytu≈Ç nad zoomem
  const titleControl = L.control({ position: "topleft" });
  titleControl.onAdd = function(map) {
    const div = L.DomUtil.create("div", "map-title");
    div.innerHTML = "Go≈Ça≈Ñcz wczoraj i dzi≈õ ‚Äì interaktywny przeglƒÖd zmian przestrzennych";
    return div;
  };
  titleControl.addTo(map);

  // Dodaj ponownie zoom control pod tytu≈Çem
  L.control.zoom({ position: "topleft" }).addTo(map);

  const osm = L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="https://openstreetmap.org">OpenStreetMap</a> contributors'
  }).addTo(map);

  // --- TU TWOJE OVERLAYE MAP HISTORYCZNYCH ---
  // (pozostawi≈Çem je tak jak by≈Çy w Twoim pliku)

  // --- NARZƒòDZIA DODATKOWE ---

  // Podzia≈Çka liniowa
  L.control.scale({
    imperial: false,
    metric: true,
    position: 'bottomleft'
  }).addTo(map);

  // Geolokalizacja u≈ºytkownika
  map.locate({ setView: true, maxZoom: 17 });

  map.on('locationfound', function(e) {
    const userMarker = L.marker(e.latlng).addTo(map)
      .bindPopup("üìç Jeste≈õ tutaj").openPopup();
  });

  map.on('locationerror', function() {
    alert("‚ùå Nie uda≈Ço siƒô ustaliƒá Twojej lokalizacji.");
  });

  // Wsp√≥≈Çrzƒôdne kursora
  L.control.mousePosition({
    position: 'bottomright',
    prefix: "Wsp√≥≈Çrzƒôdne"
  }).addTo(map);

  // Miarka odleg≈Ço≈õci i powierzchni
  L.control.measure({
    primaryLengthUnit: 'meters',
    secondaryLengthUnit: 'kilometers',
    primaryAreaUnit: 'sqmeters',
    secondaryAreaUnit: 'hectares',
    position: 'topleft'
  }).addTo(map);
</script>
</body>
</html>
