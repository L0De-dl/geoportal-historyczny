<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <title>HGIS - Gołańcz</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet.locatecontrol/dist/L.Control.Locate.min.css">
  <link rel="stylesheet" href="https://unpkg.com/leaflet-draw/dist/leaflet.draw.css">
  
  <style>
    /* === PODSTAWY STRONY === */
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
    }

    #mapa {
      width: 100vw;
      height: 100vh;
    }

    /* === TYTUŁ MAPY === */
    .tytul-mapy {
      background: white;
      padding: 8px 12px;
      margin: 10px;
      border-radius: 8px;
      font-size: 20px;
      font-weight: bold;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      font-family: 'Tahoma', sans-serif;
    }

    /* === PANEL WYBORU SCEN === */
    .przycisk-sceny {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 6px;
      border-radius: 6px;
      cursor: pointer;
      border: 1px solid transparent;
      user-select: none;
    }

    .przycisk-sceny img {
      width: 28px;
      height: 28px;
      object-fit: contain;
      display: block;
    }

    .przycisk-sceny.aktywna {
      background: #f0f0f0;
      border-color: #bbb;
    }

    .opis-sceny {
      font-size: 13px;
      font-family: 'Tahoma', sans-serif;
      color: #333;
      line-height: 1.4;
      padding: 5px;
    }

    .naglowek-scen {
      font-size: 12px;
      font-weight: bold;
      text-align: center;
      margin: 4px 0;
      color: #222;
    }

    /* === STYL KONTROLKI WARSTW === */
    .leaflet-control-layers { 
      touch-action: manipulation;
    }

    .leaflet-control-layers-base label {
      font-size: 13px;
      font-family: 'Verdana', sans-serif;
      color: #444;
    }

    .naglowek-warstw {
      font-size: 12px;
      font-weight: bold;
      text-align: center;
      color: #222;
      margin-bottom: 4px;
    }

    /* === ŻÓŁTE TOOLTIPY === */
    .leaflet-tooltip {
      background-color: yellow !important;
      color: black !important;
      border: 1px solid #666;
      font-size: 13px;
      font-family: 'Tahoma', sans-serif;
      font-weight: bold;
      padding: 4px 6px;
      border-radius: 4px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.2);
    }
    
    /* === STYL LEGENDY === */
    .legenda-w-panelu {
      padding-top: 10px;
      font-family: 'Tahoma', sans-serif;
      font-size: 13px;
      line-height: 1.4;
      display: none; /* Domyślnie ukryta */
    }

    .legenda-w-panelu h4 {
      margin: 0 0 8px;
      text-align: center;
      font-size: 14px;
      font-weight: bold;
      color: #222;
    }

    .legenda-item {
      display: flex;
      align-items: center;
      margin-bottom: 5px;
    }

    .legenda-kolor {
      width: 20px;
      height: 20px;
      margin-right: 8px;
      border: 1px solid #ccc;
    }

    .legenda-ikona {
      width: 20px;
      height: 20px;
      margin-right: 8px;
      background-size: contain;
      background-repeat: no-repeat;
      background-position: center;
    }

    /* === NOWY STYL DLA PANELU Z OPISEM === */
    .panel-opisu {
        background: white;
        padding: 8px;
        margin: 10px;
        border-radius: 8px;
        box-shadow: 0 2px 6px rgba(0,0,0,0.2);
        max-width: 400px;
        font-family: 'Tahoma', sans-serif;
        line-height: 1.4;
    }

    /* === MODAL ZE ZDJĘCIEM === */
#modal-zdjecie {
  display: none; 
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0,0,0,0.7);
  z-index: 9999;
  justify-content: center;
  align-items: center;
}

#modal-zdjecie .okno {
  position: relative;
  background: white;
  padding: 10px;
  border-radius: 10px;
  max-width: 90%;
  max-height: 90%;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

#modal-zdjecie img {
  max-width: 100%;
  max-height: 80vh; 
  object-fit: contain;
}

#modal-zdjecie .zamknij {
  cursor: pointer;
  font-size: 20px;
  font-weight: bold;
  margin-bottom: 5px;
}

  </style>
</head>
<body>

  <div id="mapa"></div>
  <div id="modal-zdjecie">
  <div class="okno">
    <div class="zamknij" onclick="zamknijModal()">✖</div>
    <img id="modal-img" src="" alt="Zdjęcie obiektu">
  </div>
</div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<script src="https://unpkg.com/leaflet.locatecontrol/dist/L.Control.Locate.min.js"></script>
<script src="https://unpkg.com/leaflet-easyprint/dist/bundle.js"></script>
<script src="https://unpkg.com/leaflet-draw/dist/leaflet.draw.js"></script>

<script>
  // === INICJALIZACJA MAPY ===
  const mapa = L.map('mapa', { zoomControl: false, zoomSnap: 0.5 })
                .setView([52.9435, 17.3002], 17.5);

  // === GRANICE MAPY ===
  mapa.setMaxBounds([
    [52.9490239, 17.2852683], // NW
    [52.9381943, 17.3122189]  // SE
  ]);

  mapa.setMinZoom(mapa.getBoundsZoom([
    [52.9490239, 17.2852683],
    [52.9381943, 17.3122189]
  ]));

  // === KONTROLKI ===
  // Tytuł mapy
  const kontrolkaTytulu = L.control({ position: "topleft" });
  kontrolkaTytulu.onAdd = function() {
    const div = L.DomUtil.create("div", "tytul-mapy");
    div.innerHTML = "Gołańcz – interaktywny przegląd zmian przestrzennych";
    return div;
  };
  kontrolkaTytulu.addTo(mapa);

  // Zoom
  L.control.zoom({ position: "topleft" }).addTo(mapa);

  // Skala
  L.control.scale({ imperial: false, metric: true, position: 'bottomleft' }).addTo(mapa);

  // === PODKŁADY MAPOWE ===
  const podkladOSM = L.tileLayer('https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}{r}.png', {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap contributors &copy; CARTO',
    subdomains: 'abcd',
  }).addTo(mapa);

  const podklad1890 = L.imageOverlay('1890.jpg', [[52.9490319, 17.3121943], [52.9382133, 17.2852466]]);
  const podklad1911 = L.imageOverlay('1911.jpg', [[52.9490257, 17.3122210], [52.9381925, 17.2852721]]);
  const podklad1934 = L.imageOverlay('1934.jpg', [[52.9490222, 17.3122162], [52.9382042, 17.2852771]]);
  const podklad1940 = L.imageOverlay('1940.jpg', [[52.9490216, 17.3122245], [52.9381925, 17.2852719]]);
  const podklad1941 = L.imageOverlay('1941.jpg', [[52.9490186, 17.3122318], [52.9381960, 17.2852748]]);
  const podklad1966 = L.imageOverlay('1966.jpg', [[52.9490219, 17.3122117], [52.9381881, 17.2852638]]);
  const podklad1981 = L.imageOverlay('1981.jpg', [[52.9490213, 17.3122149], [52.9381963, 17.2852654]]);
  const podklad2002 = L.imageOverlay('2002.jpg', [[52.9490239, 17.3122189], [52.9381943, 17.2852683]]);
  const podklad2025 = L.tileLayer('');

  const mapaPodklady = {
    "Mapa z 1890 roku": podklad1890,
    "Mapa z 1911 roku": podklad1911,
    "Mapa z 1934 roku": podklad1934,
    "Mapa z 1940 roku": podklad1940,
    "Mapa z 1941 roku": podklad1941,
    "Mapa z 1966 roku": podklad1966,
    "Mapa z 1981 roku": podklad1981,
    "Mapa z 2002 roku": podklad2002,
    "Mapa z 2025 roku": podklad2025
  };

  const kontrolkaWarstw = L.control.layers(mapaPodklady, null, { collapsed: false }).addTo(mapa);

  // Dodanie nagłówka w panelu
  const kontenerWarstw = kontrolkaWarstw.getContainer();
  const naglowekWarstw = document.createElement("div");
  naglowekWarstw.innerHTML = "<strong>WYBÓR PODKŁADU</strong>";
  naglowekWarstw.className = "naglowek-warstw";
  kontenerWarstw.insertBefore(naglowekWarstw, kontenerWarstw.firstChild);

  // === MARKERY SCEN ===
  const ikonaZolta     = L.icon({ iconUrl: '1.png',  iconSize: [25,25] });
  const ikonaZoltaCiemna = L.icon({ iconUrl: '1c.png', iconSize: [25,25] });
  const ikonaCzerwona  = L.icon({ iconUrl: '2.png',  iconSize: [25,25] });
  const ikonaCzerwonaCiemna = L.icon({ iconUrl: '2c.png', iconSize: [25,25] });
  const ikonaNiebieska = L.icon({ iconUrl: '3.png',  iconSize: [25,25] });
  const ikonaNiebieskaCiemna = L.icon({ iconUrl: '3c.png', iconSize: [25,25] });

  const znacznik1 = L.marker([52.944121, 17.299766], { icon: ikonaZolta })
    .bindTooltip("Kliknij aby przejść do sceny nr 1", {permanent: false, direction: "top"});
  znacznik1.on('mouseover', () => znacznik1.setIcon(ikonaZoltaCiemna));
  znacznik1.on('mouseout',  () => znacznik1.setIcon(ikonaZolta));
  znacznik1.on('click',     () => { window.location.href = "https://l0de-dl.github.io/scena1"; });

  const znacznik2 = L.marker([52.9438975, 17.2995147], { icon: ikonaCzerwona })
    .bindTooltip("Kliknij aby przejść do sceny nr 2", {permanent: false, direction: "top"});
  znacznik2.on('mouseover', () => znacznik2.setIcon(ikonaCzerwonaCiemna));
  znacznik2.on('mouseout',  () => znacznik2.setIcon(ikonaCzerwona));
  znacznik2.on('click',     () => { window.location.href = "https://l0de-dl.github.io/scena2"; });

  const znacznik3 = L.marker([52.942454, 17.300135], { icon: ikonaNiebieska })
    .bindTooltip("Kliknij aby przejść do sceny nr 3", {permanent: false, direction: "top"});
  znacznik3.on('mouseover', () => znacznik3.setIcon(ikonaNiebieskaCiemna));
  znacznik3.on('mouseout',  () => znacznik3.setIcon(ikonaNiebieska));
  znacznik3.on('click',     () => { window.location.href = "https://l0de-dl.github.io/scena3"; });

  const wszystkieZnaczniki = [znacznik1, znacznik2, znacznik3];

  // Usuwanie wszystkich znaczników
  function usunZnaczniki() {
    wszystkieZnaczniki.forEach(z => { if (mapa.hasLayer(z)) mapa.removeLayer(z); });
  }

  // === Geojson ===
  // === SCENA 1 – DRZEWA ===
  const drzewa_then = {
    "type": "FeatureCollection",
    "name": "scena1_then",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
      { "type": "Feature", "properties": {}, "geometry": { "type": "MultiPoint", "coordinates": [
        [17.2995881, 52.9440234],
        [17.2996245, 52.9438778],
        [17.2998895, 52.9436305],
        [17.3001909, 52.9436743],
        [17.3004403, 52.9437275],
        [17.3006793, 52.9437808],
        [17.3008404, 52.9439718],
        [17.3008092, 52.9441471],
        [17.3007209, 52.9443444],
        [17.2995466, 52.9441894],
        [17.2998116, 52.9442583],
        [17.3000922, 52.9443459],
        [17.3003260, 52.9444242]
      ]}}
    ]
  };

  const drzewa_now = {
    "type": "FeatureCollection",
    "name": "scena1_now",
    "crs": { "type": "name", "properties": { "name": "urn:ogc:def:crs:OGC:1.3:CRS84" } },
    "features": [
      { "type": "Feature", "properties": {}, "geometry": { "type": "MultiPolygon", "coordinates": [ [ [ 
        [17.3005556, 52.9443292], [17.2998073, 52.9439817], [17.2997376, 52.9438896],
        [17.2997242, 52.9438459], [17.2997268, 52.9437587], [17.2997564, 52.9437118],
        [17.2997897, 52.9436850], [17.2998127, 52.9436665], [17.2999119, 52.9436374],
        [17.2999843, 52.9436310], [17.3000680, 52.9436403], [17.3003464, 52.9436876],
        [17.3007085, 52.9437587], [17.3007939, 52.9437898], [17.3008477, 52.9438188],
        [17.3008453, 52.9438783], [17.3007836, 52.9438961], [17.3006924, 52.9442339],
        [17.3007246, 52.9442646], [17.3007112, 52.9442904], [17.3006790, 52.9443131],
        [17.3006281, 52.9443276], [17.3005905, 52.9443308], [17.3005556, 52.9443292]
      ] ] ]}}
    ]
  };

  const warstwaDrzewaThen = L.geoJSON(drzewa_then, {
    pointToLayer: (f, latlng) => L.marker(latlng, {
      icon: L.icon({ iconUrl: 'drzewa_szare.png', iconSize: [18,18], iconAnchor: [9,9] })
    }).bindTooltip("Kliknij aby zobaczyć zdjęcie", {permanent: false, direction: "top"})
      .on("click", () => pokazModal("then1.jpg"))  // <- tu dodane
  });

  const warstwaDrzewaNow = L.geoJSON(drzewa_now, {
    style: { color: "#398e3c", weight: 0.5, fillColor: "#79dc7d", fillOpacity: 0.5 }
  }).bindTooltip("Kliknij aby zobaczyć zdjęcie", {permanent: false, direction: "top"})
      .on("click", () => pokazModal("drzewa.jpg"))  // <- tu dodane
    ;


  // === SCENA 2 – POMNIK ===
  const pomnik_then = {
    "type": "FeatureCollection",
    "name": "scena2_then",
    "features": [
      { "type": "Feature", "properties": {}, "geometry": { "type": "Point", "coordinates": [17.2997037, 52.9440829] } }
    ]
  };

  const pomnik_now = {
    "type": "FeatureCollection",
    "name": "scena2_now",
    "features": [
      { "type": "Feature", "properties": {}, "geometry": { "type": "Point", "coordinates": [17.3001883, 52.9438316] } }
    ]
  };

  const warstwaPomnikThen = L.geoJSON(pomnik_then, {
    pointToLayer: (f, latlng) => L.marker(latlng, {
      icon: L.icon({ iconUrl: 'pomnik_szary.png', iconSize: [12,22], iconAnchor: [6,11] })
    }).bindTooltip("Kliknij aby zobaczyć zdjęcie", {permanent: false, direction: "top"})
      .on("click", () => pokazModal("then2.jpg"))  // <- tu dodane
  });

  const warstwaPomnikNow = L.geoJSON(pomnik_now, {
    pointToLayer: (f, latlng) => L.marker(latlng, {
      icon: L.icon({ iconUrl: 'pomnik_czerwony.png', iconSize: [12,22], iconAnchor: [6,11] })
    }).bindTooltip("Kliknij aby zobaczyć zdjęcie", {permanent: false, direction: "top"})
      .on("click", () => pokazModal("drzewa.jpg"))  // <- tu dodane
  });


  // === SCENA 3 – KOŚCIÓŁ ===
  const kosciol_then = {
    "type": "FeatureCollection",
    "name": "scena3_then",
    "features": [
      { "type": "Feature", "properties": {}, "geometry": { "type": "Point", "coordinates": [17.3001727, 52.9430590] } }
    ]
  };

  const kosciol_now = {
    "type": "FeatureCollection",
    "name": "scena3_now",
    "features": [
      { "type": "Feature", "properties": {}, "geometry": { "type": "Point", "coordinates": [17.3009418, 52.9422824] } }
    ]
  };

  const warstwaKosciolThen = L.geoJSON(kosciol_then, {
    pointToLayer: (f, latlng) => L.marker(latlng, {
      icon: L.icon({ iconUrl: 'kosciol_szary.png', iconSize: [18,22], iconAnchor: [9,11] })
    }).bindTooltip("Kliknij aby zobaczyć zdjęcie", {permanent: false, direction: "top"})
      .on("click", () => pokazModal("then3.jpg"))  // <- tu dodane
  });

  const warstwaKosciolNow = L.geoJSON(kosciol_now, {
    pointToLayer: (f, latlng) => L.marker(latlng, {
      icon: L.icon({ iconUrl: 'kosciol_niebieski.png', iconSize: [18,22], iconAnchor: [9,11] })
    }).bindTooltip("Kliknij aby zobaczyć zdjęcie", {permanent: false, direction: "top"})
      .on("click", () => pokazModal("drzewa.jpg"))  // <- tu dodane
  });

  // === WYBÓR SCENY W TYM SAMYM PANELU ===
  const separator1 = document.createElement('hr');
  separator1.style.margin = "6px 0";
  separator1.style.border = "none";
  separator1.style.borderTop = "1px solid #ccc";
  kontenerWarstw.appendChild(separator1);

  const naglowekScen = document.createElement('div');
  naglowekScen.innerHTML = "<strong>WYBÓR SCENY</strong>";
  naglowekScen.className = "naglowek-scen";
  kontenerWarstw.appendChild(naglowekScen);

  function utworzPrzyciskSceny(nr, opis, ikonaUrl) {
    const przycisk = document.createElement('div');
    przycisk.className = 'przycisk-sceny';
    przycisk.setAttribute('role', 'button');
    przycisk.setAttribute('tabindex', '0');

    const obrazek = document.createElement('img');
    obrazek.src = ikonaUrl;
    obrazek.alt = opis;

    const t = document.createElement('div');
    t.className = 'opis-sceny';
    t.textContent = opis;

    przycisk.appendChild(obrazek);
    przycisk.appendChild(t);

    przycisk.addEventListener('click', () => pokazScene(nr));
    przycisk.addEventListener('keydown', (e) => { 
      if (e.key === 'Enter' || e.key === ' ') { 
        e.preventDefault(); 
        pokazScene(nr); 
      } 
    });

    return przycisk;
  }

  kontenerWarstw.appendChild(utworzPrzyciskSceny(1, 'Scena 1', '1.png'));
  kontenerWarstw.appendChild(utworzPrzyciskSceny(2, 'Scena 2', '2.png'));
  kontenerWarstw.appendChild(utworzPrzyciskSceny(3, 'Scena 3', '3.png'));

  // === NOWA SEKCJA LEGENDY W PANELU ===
  const separator2 = document.createElement('hr');
  separator2.style.margin = "6px 0";
  separator2.style.border = "none";
  separator2.style.borderTop = "1px solid #ccc";
  kontenerWarstw.appendChild(separator2);

  const kontenerLegendy = document.createElement('div');
  kontenerLegendy.className = 'legenda-w-panelu';
  kontenerWarstw.appendChild(kontenerLegendy);
  
  function stworzLegende(tytul, items) {
    kontenerLegendy.innerHTML = `<h4>${tytul}</h4>`;
    items.forEach(item => {
      const itemDiv = document.createElement('div');
      itemDiv.className = 'legenda-item';

      if (item.typ === 'kolor') {
        itemDiv.innerHTML = `<span class="legenda-kolor" style="background-color: ${item.kolor}; border-color: ${item.ramka || 'transparent'};"></span><span>${item.opis}</span>`;
      } else if (item.typ === 'ikona') {
        itemDiv.innerHTML = `<span class="legenda-ikona" style="background-image: url('${item.ikona}');"></span><span>${item.opis}</span>`;
      }
      kontenerLegendy.appendChild(itemDiv);
    });
    kontenerLegendy.style.display = 'block';
  }

  // === NOWA KONTROLKA DLA OPISU SCENY ===
  const kontrolkaOpisu = L.control({ position: 'bottomright' });
  let kontenerOpisu = null;

  kontrolkaOpisu.onAdd = function() {
    kontenerOpisu = L.DomUtil.create('div', 'panel-opisu');
    kontenerOpisu.innerHTML = `
      <div id="opis-tresc" class="opis-sceny" style="display: none;"></div>
    `;
    return kontenerOpisu;
  };
  kontrolkaOpisu.addTo(mapa);
  const opisTresc = document.getElementById('opis-tresc');
  
  // Pokazywanie wybranej sceny
  function pokazScene(nr) {
    usunZnaczniki();

    // Usuwanie wszystkich warstw GeoJSON
    if (mapa.hasLayer(warstwaDrzewaThen)) mapa.removeLayer(warstwaDrzewaThen);
    if (mapa.hasLayer(warstwaDrzewaNow)) mapa.removeLayer(warstwaDrzewaNow);
    if (mapa.hasLayer(warstwaPomnikNow)) mapa.removeLayer(warstwaPomnikNow);
    if (mapa.hasLayer(warstwaPomnikThen)) mapa.removeLayer(warstwaPomnikThen);
    if (mapa.hasLayer(warstwaKosciolNow)) mapa.removeLayer(warstwaKosciolNow);
    if (mapa.hasLayer(warstwaKosciolThen)) mapa.removeLayer(warstwaKosciolThen);
    
    // Ukrycie legendy i opisu przed ich aktualizacją
    kontenerLegendy.style.display = 'none';
    opisTresc.style.display = 'none';

    if (nr === 1) {
      mapa.addLayer(znacznik1);
      warstwaDrzewaNow.addTo(mapa);
      warstwaDrzewaThen.addTo(mapa);
      stworzLegende("Legenda", [
        { typ: 'ikona', ikona: 'drzewa_szare.png', opis: 'Drzewa dawniej' },
        { typ: 'kolor', kolor: '#79dc7d', ramka: '#398e3c', opis: 'Drzewa obecnie' }
      ]);
      opisTresc.innerHTML = "Pierwotnie centralny plac otaczał pas wysokich drzew. Z czasem, prawdopodobnie w związku z elektryfikacją i rozwojem radiofonii, drzewa zostały usunięte, ustępując miejsca przewodom elektrycznym i telefonicznym. Po II wojnie światowej, w ramach prac porządkowych oraz modernizacji przeprowadzonych w latach 70., zmieniono koncepcję układu zieleni. W centrum rynku założono pięcioalejkowy park, do którego przeniesiono pomnik św. Wawrzyńca z narożnika placu.";
      opisTresc.style.display = 'block';

    } else if (nr === 2) {
      mapa.addLayer(znacznik2);
      warstwaPomnikNow.addTo(mapa);
      warstwaPomnikThen.addTo(mapa);
      stworzLegende("Legenda", [
        { typ: 'ikona', ikona: 'pomnik_szary.png', opis: 'Pomnik dawniej' },
        { typ: 'ikona', ikona: 'pomnik_czerwony.png', opis: 'Pomnik obecnie' }
      ]);
      opisTresc.innerHTML = "Monument wzniesiono w 1925 roku z inicjatywy lokalnej społeczności. W czasie II wojny światowej został zniszczony, a w jego miejscu po wojnie ustawiono pomnik ku czci poległych w I i II wojnie światowej. W 1999 roku na poddaszu kościoła odnaleziono fragmenty dawnego pomnika, które poddano rekonstrukcji. Rok później odtworzony monument ponownie stanął na rynku, tym razem w jego centralnej części.";
      opisTresc.style.display = 'block';

    } else if (nr === 3) {
      mapa.addLayer(znacznik3);
      warstwaKosciolNow.addTo(mapa);
      warstwaKosciolThen.addTo(mapa);
      stworzLegende("Legenda", [
        { typ: 'ikona', ikona: 'kosciol_szary.png', opis: 'Kościół dawniej' },
        { typ: 'ikona', ikona: 'kosciol_niebieski.png', opis: 'Kościół obecnie' }
      ]);
      opisTresc.innerHTML = "Na obecnym placu przy ulicy Kościelnej znajdował się drewniany kościół parafialny zbudowany w latach 1781–1785 na miejscu starszej świątyni. Rozebrano go w pierwszej połowie XX wieku z powodu złego stanu technicznego. W 1934 roku jego funkcję przejął nowy, murowany kościół pw. św. Wawrzyńca, wzniesiony po przeciwnej stronie Strugi Gołanieckiej. Dawne położenie świątyni przypomina nazwa ulicy Kościelnej, zmieniona na krótko w czasach PRL na ulicę Nowotki.";
      opisTresc.style.display = 'block';

    }

    document.querySelectorAll('.przycisk-sceny').forEach((btn, idx) => {
      btn.classList.toggle('aktywna', (idx + 1) === nr);
    });
  }
  
  // === POCZĄTEK: Scena 1 ===
  pokazScene(1);

  // === modal===
  function pokazModal(src) {
  document.getElementById('modal-img').src = src;
  document.getElementById('modal-zdjecie').style.display = 'flex';
}

function zamknijModal() {
  document.getElementById('modal-zdjecie').style.display = 'none';
}

// === pluginy===
  
L.control.locate().addTo(mapa);
  

    const printer = L.easyPrint({
    title: 'Zapisz mapę jako PNG',
    position: 'topleft',
    filename: 'moja_mapa'
  }).addTo(mapa);

    const drawControl = new L.Control.Draw({
    draw: {
      polyline: true,
      polygon: true,
      rectangle: true,
      circle: true,
      marker: true
    }
  });
  mapa.addControl(drawControl);

  // Obsługa narysowanych obiektów
  mapa.on(L.Draw.Event.CREATED, function (e) {
    const layer = e.layer;
    mapa.addLayer(layer);
  });
  
  
</script>
</body>
</html>












